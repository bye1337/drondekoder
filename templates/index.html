<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î—Ä–æ–Ω –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –°–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>üéØ –°–∏—Å—Ç–µ–º–∞ –ù–∞–≤–∏–≥–∞—Ü–∏–∏ –î—Ä–æ–Ω–∞</h1>
            <p class="subtitle">–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ –±–µ–∑ GPS</p>
        </header>

        <div class="main-content">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ -->
            <div class="control-panel">
                <section class="panel-section">
                    <h2>üì∑ –ó–∞–≥—Ä—É–∑–∫–∞ –ö–∞—Ä—Ç—ã</h2>
                    <div class="upload-area" id="map-upload-area">
                        <input type="file" id="map-file" accept="image/*" style="display: none;">
                        <label for="map-file" class="upload-btn">
                            <span>–í—ã–±—Ä–∞—Ç—å –∫–∞—Ä—Ç—É</span>
                        </label>
                        <div id="map-status" class="status-text"></div>
                    </div>
                </section>

                <section class="panel-section">
                    <h2>üöÅ –û–±—Ä–∞–±–æ—Ç–∫–∞ –í–∏–¥–µ–æ</h2>
                    <div class="video-controls">
                        <button id="start-video-btn" class="action-btn" disabled>
                            üìπ –ù–∞—á–∞—Ç—å –≤–∏–¥–µ–æ–ø–æ—Ç–æ–∫
                        </button>
                        <button id="stop-video-btn" class="action-btn secondary" disabled>
                            ‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Ç–æ–∫
                        </button>
                        <video id="video-stream" autoplay style="display: none; width: 100%; max-height: 200px; border-radius: 8px; margin-top: 10px;"></video>
                    </div>
                    <div class="upload-area" id="drone-upload-area" style="margin-top: 15px;">
                        <h3 style="margin-bottom: 10px; font-size: 1em;">–ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</h3>
                        <input type="file" id="drone-file" accept="image/*" style="display: none;">
                        <label for="drone-file" class="upload-btn">
                            <span>–í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ –¥—Ä–æ–Ω–∞</span>
                        </label>
                        <div id="drone-status" class="status-text"></div>
                    </div>
                    <button id="find-location-btn" class="action-btn" disabled>
                        –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
                    </button>
                </section>

                <section class="panel-section">
                    <h2>üó∫Ô∏è –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ú–∞—Ä—à—Ä—É—Ç–∞</h2>
                    <div class="route-controls">
                        <button id="clear-route-btn" class="action-btn secondary">–û—á–∏—Å—Ç–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç</button>
                        <label>
                            –†–∞–∑—Ä–µ—à–µ–Ω–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ (–ø–∏–∫—Å–µ–ª–∏):
                            <input type="number" id="deviation-threshold" value="50" min="10" max="500">
                        </label>
                    </div>
                    <div class="info-box">
                        <p><strong>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong></p>
                        <p>–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç—É, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ—á–∫–∏ –º–∞—Ä—à—Ä—É—Ç–∞</p>
                        <p>–ú–∏–Ω–∏–º—É–º 2 —Ç–æ—á–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞</p>
                    </div>
                </section>

                <section class="panel-section">
                    <h2>üìä –°—Ç–∞—Ç—É—Å</h2>
                    <div id="status-info" class="status-info">
                        <div class="status-item">
                            <span class="label">–ö–∞—Ä—Ç–∞:</span>
                            <span id="map-loaded-status" class="value">–ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞</span>
                        </div>
                        <div class="status-item">
                            <span class="label">–ü–æ–∑–∏—Ü–∏—è:</span>
                            <span id="position-status" class="value">–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞</span>
                        </div>
                        <div class="status-item">
                            <span class="label">–ú–∞—Ä—à—Ä—É—Ç:</span>
                            <span id="route-status" class="value">–ù–µ –∑–∞–¥–∞–Ω</span>
                        </div>
                        <div class="status-item">
                            <span class="label">–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ:</span>
                            <span id="deviation-status" class="value">-</span>
                        </div>
                    </div>
                </section>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –ö–∞—Ä—Ç–∞ -->
            <div class="map-panel">
                <h2>–ö–∞—Ä—Ç–∞</h2>
                <div id="map-container" class="map-container">
                    <canvas id="map-canvas"></canvas>
                    <div id="map-placeholder" class="map-placeholder">
                        <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–∞—Ä—Ç—É –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã</p>
                    </div>
                </div>
                <div id="location-info" class="location-info" style="display: none;">
                    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏</h3>
                    <div id="location-details"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>

