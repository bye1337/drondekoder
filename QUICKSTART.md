# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- CUDA-capable GPU (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- 16GB+ RAM
- 10GB+ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd drondekoder2.0
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Windows:**
```bash
python -m venv venv
venv\Scripts\activate
```

**Linux/Mac:**
```bash
python -m venv venv
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

## üìä –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –¥–∞–Ω–Ω—ã—Ö:
```bash
mkdir -p data/processed/pairs
```

–ü–æ–º–µ—Å—Ç–∏—Ç–µ –ø–∞—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ `data/processed/pairs/`:
```
pairs/
  ‚îú‚îÄ‚îÄ image_001_map.jpg
  ‚îú‚îÄ‚îÄ image_001_drone.jpg
  ‚îú‚îÄ‚îÄ image_002_map.jpg
  ‚îú‚îÄ‚îÄ image_002_drone.jpg
  ...
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä –∏–∑ –±–æ–ª—å—à–æ–π –∫–∞—Ä—Ç—ã:

```bash
python scripts/create_dataset.py \
    --map-image path/to/large_map.jpg \
    --output-dir data/processed/pairs \
    --num-pairs 1000 \
    --patch-size 512
```

## üéì –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/train_config.yaml` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

### 2. –ó–∞–ø—É—Å–∫ –æ–±—É—á–µ–Ω–∏—è

```bash
python src/training/train.py --config config/train_config.yaml
```

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è:**
- –ù–∞ GPU: 2-6 —á–∞—Å–æ–≤ (100 —ç–ø–æ—Ö)
- –ù–∞ CPU: 12-24 —á–∞—Å–∞ (100 —ç–ø–æ—Ö)

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `models/checkpoints/`:
- `last_checkpoint.pth` - –ø–æ—Å–ª–µ–¥–Ω–∏–π checkpoint
- `best_model.pth` - –ª—É—á—à–∞—è –º–æ–¥–µ–ª—å

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –æ–¥–Ω–æ–π –ø–∞—Ä–µ

```bash
python scripts/test_model.py \
    --model models/checkpoints/best_model.pth \
    --map-image data/test/map.jpg \
    --drone-image data/test/drone.jpg
```

### Batch —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python scripts/test_model.py \
    --model models/checkpoints/best_model.pth \
    --test-dir data/processed/pairs \
    --num-tests 50
```

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ó–∞–ø—É—Å–∫ Streamlit –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

```bash
streamlit run src/api/web_app.py
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: `http://localhost:8501`

### –ó–∞–ø—É—Å–∫ FastAPI —Å–µ—Ä–≤–µ—Ä–∞

```bash
uvicorn src.api.main:app --reload
```

–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: `http://localhost:8000`

### API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

## üìç –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### 1. –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –±–æ–ª—å—à—É—é –∫–∞—Ä—Ç—É –º–µ—Å—Ç–Ω–æ—Å—Ç–∏
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–Ω–∏–º–æ–∫ —Å –¥—Ä–æ–Ω–∞
3. –ù–∞–∂–º–∏—Ç–µ "–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é"
4. –ü–æ–ª—É—á–∏—Ç–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã

### 2. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç —Å —Ç–æ—á–∫–∞–º–∏
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é
3. –ü–æ–ª—É—á–∏—Ç–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ–± –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö

## üîç API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

```
POST /api/match - –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
POST /api/create-route - –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞
POST /api/update-position - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
GET /api/route-status - –°—Ç–∞—Ç—É—Å –º–∞—Ä—à—Ä—É—Ç–∞
GET /api/health - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API
```

–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```python
import requests

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
with open('map.jpg', 'rb') as f1, open('drone.jpg', 'rb') as f2:
    response = requests.post(
        'http://localhost:8000/api/match',
        files={'map_image': f1, 'drone_image': f2}
    )
    result = response.json()
    print(f"–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: {result['lat']}, {result['lon']}")
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞: "Model not found"

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –º–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞:
```bash
ls models/checkpoints/best_model.pth
```

–ï—Å–ª–∏ –Ω–µ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –æ–±—É—á–µ–Ω–∏–µ.

### –û—à–∏–±–∫–∞: Out of Memory

–£–º–µ–Ω—å—à–∏—Ç–µ batch size –≤ `config/train_config.yaml`:
```yaml
training:
  batch_size: 16  # –í–º–µ—Å—Ç–æ 32
```

### –û—à–∏–±–∫–∞: CUDA out of memory

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CPU:
```python
device = 'cpu'
```

–ò–ª–∏ —É–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –æ–±—É—á–µ–Ω–∏—é](TRAINING_GUIDE.md)
- [–û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](README.md)

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏ Python –∏ PyTorch
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ**
